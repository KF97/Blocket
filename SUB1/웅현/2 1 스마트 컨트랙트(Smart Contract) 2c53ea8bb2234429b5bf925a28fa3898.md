# 2.1 스마트 컨트랙트(Smart Contract)

생성일: 2021년 9월 1일 오후 4:00

일반적으로 계약은 법으로 집행되는 두 당사자, 또는 여러 당사자 간의 서면합의이다. 계약서를 작성하여 코드로 변환하고, 블록체인에 배포하면 디지털 계약이 체결된다. 

## 예시

Crowdsale 응용 프로그램을 작성하려고 한다고 가정해보자. 제품을 만들기 위해 10,000$를 모으고자 하는 제작자가 있으며, 이 제품에 관심이 있고 선불로 기꺼이 지불할 잠재 고객이 있다. 계약상 각 고객이 보내는 액수가 10$ ~ 10,000$ 사이에 해당하면 수령할 것이고, **목표가 달성된다면 그 돈은 제작자에게 송금된다**. 그렇지 않은 경우에는 기부자에게 돈이 다시 돌려보내진다. → 스마트 계약(smart contract)을 사용하여 제작자 - 지지자 간의 계약을 시행하는 이상적인 사용 사례이다. 중앙화된 응용 프로그램에서도 이 논리를 구현하는 것은 간단하다. 그렇지만 스마트 계약에서 이를 구현할 때의 장점은 아래와 같다.

1. **모든 참여자가 보낸 돈이 스마트 계약에 담겨 있다. 참여자도 제작자도 그 돈을 사용할 수 없다.** 
2. **목표에 도달하자마자 돈이 제작자에게 보내지도록 코드를 구현할 수 있다.**
3. **특정 시간 내에 목표에 도달하지 못하면 모든 참가자에게 환불을 시행할 수 있도록 코드를 구현할 수 있다.** 
4. **이 코드는 한번 블록체인에 배포된 후에는 조작할 수 없다.**

## 2.2 이더, 그리고 이더의 단위

각 국가마다 USD, INR, RNB, GBP, EUR 등과 같은 자체 통화가 있듯이, 각 블록체인에는 자체 통화가 존재한다. 이더리움 블록체인의 경우 기본 통화를 ETH(Ether)로 정의한다.

현실 세계의 통화에는 다양한 단위가 존재한다. 예를 들어 미국의 1달러는 100센트이며, 페니(1센트), 니켈(5센트), 쿼터(25센트)와 같은 다양한 단위가 있다. ETH 또한 마찬가지로 다양한 단위가 존재한다. 그 중에서 두 가지, **이더와 웨이**만 잘 기억해도 된다. 웨이는 가장 낮은 단위로 스마트 계약에서 실제로 쓰이는 단위이다. 

**1e+18 wei가 바로 1ether이다.** 

## 2.3 주소 (Address)

페이스북과 같은 웹 사이트에 로그인하려면 일반적으로 이메일, 사용자 이름과 비밀번호를 사용한다. 당신의 사용자 이름은 페이스북에서 신분증에 준하며, 사용자 이름 / 암호를 사용하여 페이스북 로그인을 위한 인증을 거치게 된다.

이더리움 블록체인에서 사용자의 신분증에 해당하는 것이 바로 주소이다. 이더리움 주소는 `001d3f1ef827552ae1114027bd3ecf1f086ba0f9` 와 같은 형태를 가진다. **각 주소에는 해당하는 개인키가 존재**한다. 개인키는 사용자가 알고 있는 일종의 암호로 간주할 수 있다. 

블록체인과 상호작용하기 위해서는 반드시 이 주소 + 개인키 쌍이 필요하다. 

1. 이더리움 주소(Address)는 공개되어 있으며, 전 세계 누구와도 공유할 수 있다.
2. 개인키는 절대 다른 사람과 공유해서는 안된다.
3. 주소 + 개인키는 그 어떤 데이터베이스에도 저장되지 않는다. 사용자만이 이 정보를 통제할 수 있다. 

### 이더리움 주소는 어떻게 생성되는가?

## 2.4 계정(Accounts)

### 이더리움 주소와 개인키의 조합을 계정(Accounts)이라고 한다.

이더리움 계정은 이더 잔고를 보유하고 트랜잭션을 전송할 수 있다. 

- EOA : 공개 주소와 개인키의 조합을 갖는 계정을 의미한다.
    - 다른 계정과 이더를 송수신하고
    - 스마트 컨트랙트에 트랜잭션을 보낼 수 있다.
- CA : 컨트랙트 계정에는 상응하는 개인키가 없다. 이러한 계정은 스마트 계약을 블록체인에 배포할 때 생성된다.
    - 다른 계정과 이더를 송수신(EOA와 동일)
    - 관련된 코드를 담고(EOA와 다름)
    - EOA나 다른 컨트랙트의 호출을 받아 트랜잭션을 발생시킨다. 즉 자체적으로 트랜잭션을 전송할 수는 없으며 반드시 다른 계정의 요청에 대해서만 트랜잭션을 발생시킬 수 있다.

## 2.5 지갑 (Wallets)

지갑은 이더리움 계정을 저장하고 관리하는 데 사용되는 소프트웨어 플러그인 또는 라이브러리이다. 지갑을 통해 여러 계정을 관리하고 트랜잭션에 서명하고, 잔고를 추적하는 등의 기능을 사용할 수 있다. 지갑은 크게 2가지 유형으로 분류할 수 있다.

1. 비결정적 지갑 : 임의의 개인키,공개키 쌍을 사용하는 유형의 지갑이다.
2. 결정론적 지갑 : 이 유형의 지갑에서는 모든 키가 Seed라는 단일 시작 지점에서 파생된다. 이 시드는 사용자가 다른 정보를 요구하지 않고 지갑을 쉽게 백업하고 복원할 수 있게 해주며, 경우에 따라 개인키를 모른 채 공개키를 생성할 수 있게 해준다. 

## 2.6 Gas, Gas Price, Gas Limit